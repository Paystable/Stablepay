import{a3 as p,r,j as e,B as i,a4 as x}from"./index-tQSIi359.js";import{b as w,d as g}from"./users-BWKttZpu.js";import{u as C}from"./useConnect-P8iWzXUW.js";import{R as b}from"./refresh-cw-DJcsv8G4.js";import{W}from"./tabs-BrOrm1mH.js";function E(){const{address:s,isConnected:n,isConnecting:c}=w(),{connect:f}=C(),{disconnect:m}=g(),[j,u]=p(),[N,a]=r.useState(!1),[v,o]=r.useState(!1);r.useEffect(()=>{n&&s?d():(o(!1),a(!1))},[n,s]);const d=async()=>{if(s)try{const t=await fetch(`/api/travel-rule/wallet-status/${s}`);if(t.ok){const l=await t.json();console.log("Wallet status check:",l),l.isNewWallet&&!l.hasCompliance?(o(!0),a(!0)):(o(!1),a(!1))}}catch(t){console.error("Error checking wallet status:",t),o(!1),a(!1)}},h=async()=>{try{f({connector:x({appName:"StablePay",appLogoUrl:"/stablepay-logo.png"})})}catch(t){console.error("Connection failed:",t)}};return n&&s?e.jsx(i,{onClick:()=>{m(),u("/")},variant:"outline",className:"border-2 border-[#6667AB]/30 text-[#6667AB] hover:bg-[#6667AB]/10 font-semibold px-8 py-3",children:"Disconnect Wallet"}):e.jsx(e.Fragment,{children:e.jsx(i,{onClick:h,disabled:c,className:"w-full bg-[#6667AB] hover:bg-[#6667AB]/90 text-white font-semibold py-4 px-8 rounded-2xl text-lg shadow-lg hover:shadow-xl transition-all duration-300 border-0",children:c?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-5 h-5 mr-3 animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-5 h-5 mr-3"}),"Connect Wallet"]})})})}export{E as W};
