import{c as F,r as n,j as e,B as o,D as W,C as u,b as j,d as f,a as p,e as q}from"./index-tQSIi359.js";import{I as G}from"./input-Bs4M08Dr.js";import{B as D}from"./badge-BeNv00gB.js";import{S as J,T as K,a as Q,b as E,c as d,d as X,e as m}from"./table-Cj841app.js";import{S as Z,a as _,b as ee,c as se,d as b}from"./select-CoHF2K65.js";import{D as ae,d as te,a as le,b as ne,c as ie,e as re}from"./dialog-egeDzDxQ.js";import{A as ce,a as oe}from"./alert-DM8QbjKm.js";import{R as de}from"./refresh-cw-DJcsv8G4.js";import{L as me}from"./loader-circle-DawMBcb1.js";import{E as xe}from"./eye-fa2bG588.js";import"./chevron-up-BvOqR0dN.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function je(){const[y,w]=n.useState([]),[i,P]=n.useState(null),[R,T]=n.useState(!0),[C,v]=n.useState(null),[r,B]=n.useState(""),[g,I]=n.useState("all"),[t,V]=n.useState(null),[c,H]=n.useState(1),[S,U]=n.useState(1),[A,$]=n.useState(0),x=async(s=1,a="all")=>{try{T(!0);const h=new URLSearchParams({page:s.toString(),limit:"20",...a!=="all"&&{formType:a}}),l=await(await fetch(`/api/early-access/submissions?${h}`)).json();l.success?(w(l.data.submissions),U(l.data.pagination.pages),$(l.data.pagination.total),H(s)):v(l.message||"Failed to fetch submissions")}catch(h){v("Failed to fetch submissions"),console.error("Error fetching submissions:",h)}finally{T(!1)}},L=async()=>{try{const a=await(await fetch("/api/early-access/stats")).json();a.success&&P(a.data)}catch(s){console.error("Error fetching stats:",s)}};n.useEffect(()=>{x(),L()},[]);const z=s=>{I(s),x(1,s)},M=()=>{const s=y.filter(a=>a.fullName.toLowerCase().includes(r.toLowerCase())||a.email.toLowerCase().includes(r.toLowerCase())||a.phoneNumber.includes(r));w(s)},O=async s=>{if(confirm("Are you sure you want to delete this submission?"))try{(await fetch(`/api/early-access/submissions/${s}`,{method:"DELETE"})).ok?(x(c,g),L()):v("Failed to delete submission")}catch(a){v("Failed to delete submission"),console.error("Error deleting submission:",a)}},Y=()=>{const s=[["Name","Email","Phone","Form Type","Amount","Submitted At"].join(","),...y.map(l=>[l.fullName,l.email,l.phoneNumber,l.formType,l.monthlyRemittance||l.investmentAmount||0,new Date(l.submittedAt).toLocaleDateString()].join(","))].join(`
`),a=new Blob([s],{type:"text/csv"}),h=window.URL.createObjectURL(a),N=document.createElement("a");N.href=h,N.download=`early-access-submissions-${new Date().toISOString().split("T")[0]}.csv`,N.click(),window.URL.revokeObjectURL(h)},k=y.filter(s=>r===""||s.fullName.toLowerCase().includes(r.toLowerCase())||s.email.toLowerCase().includes(r.toLowerCase())||s.phoneNumber.includes(r));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Early Access Admin Panel"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage early access submissions and view analytics"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:()=>x(c,g),variant:"outline",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(o,{onClick:Y,variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),C&&e.jsx(ce,{variant:"destructive",children:e.jsx(oe,{children:C})}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(u,{children:[e.jsx(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(f,{className:"text-sm font-medium",children:"Total Submissions"})}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalSubmissions}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.recentSubmissions," in last 24h"]})]})]}),e.jsxs(u,{children:[e.jsx(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(f,{className:"text-sm font-medium",children:"Savings Forms"})}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.formTypeBreakdown.savings}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(i.formTypeBreakdown.savings/i.totalSubmissions*100).toFixed(1),"% of total"]})]})]}),e.jsxs(u,{children:[e.jsx(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(f,{className:"text-sm font-medium",children:"Investment Forms"})}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.formTypeBreakdown.investment}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(i.formTypeBreakdown.investment/i.totalSubmissions*100).toFixed(1),"% of total"]})]})]}),e.jsxs(u,{children:[e.jsx(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(f,{className:"text-sm font-medium",children:"Total Potential Savings"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["₹",i.totalCalculatedSavings.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Over 5 years"})]})]})]}),e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(f,{children:"Filters"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search by name, email, or phone...",value:r,onChange:s=>B(s.target.value),className:"pl-8"})]})}),e.jsxs(Z,{value:g,onValueChange:z,children:[e.jsx(_,{className:"w-[180px]",children:e.jsx(ee,{placeholder:"Form Type"})}),e.jsxs(se,{children:[e.jsx(b,{value:"all",children:"All Types"}),e.jsx(b,{value:"savings",children:"Savings"}),e.jsx(b,{value:"investment",children:"Investment"})]})]}),e.jsxs(o,{onClick:M,variant:"outline",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Apply"]})]})})]}),e.jsxs(u,{children:[e.jsxs(j,{children:[e.jsxs(f,{children:["Submissions (",A,")"]}),e.jsxs(q,{children:["Showing ",k.length," of ",A," submissions"]})]}),e.jsxs(p,{children:[R?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(me,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(E,{children:[e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Email"}),e.jsx(d,{children:"Phone"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Amount"}),e.jsx(d,{children:"Submitted"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(X,{children:k.map(s=>e.jsxs(E,{children:[e.jsx(m,{className:"font-medium",children:s.fullName}),e.jsx(m,{children:s.email}),e.jsx(m,{children:s.phoneNumber}),e.jsx(m,{children:e.jsx(D,{variant:s.formType==="savings"?"default":"secondary",children:s.formType})}),e.jsx(m,{children:s.monthlyRemittance?`₹${s.monthlyRemittance.toLocaleString()}/month`:s.investmentAmount?`₹${s.investmentAmount.toLocaleString()}`:"N/A"}),e.jsx(m,{children:new Date(s.submittedAt).toLocaleDateString()}),e.jsx(m,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(o,{variant:"outline",size:"sm",onClick:()=>V(s),children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(le,{className:"max-w-2xl",children:[e.jsxs(ne,{children:[e.jsx(ie,{children:"Submission Details"}),e.jsxs(re,{children:["Complete information for ",s.fullName]})]}),t&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Form Type"}),e.jsx(D,{variant:t.formType==="savings"?"default":"secondary",children:t.formType})]}),t.walletAddress&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Wallet Address"}),e.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:t.walletAddress})]}),t.calculations&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Calculations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[t.calculations.annualSavings&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Annual Savings: "}),e.jsxs("span",{className:"text-sm",children:["₹",t.calculations.annualSavings.toLocaleString()]})]}),t.calculations.totalSavings5Years&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"5-Year Savings: "}),e.jsxs("span",{className:"text-sm",children:["₹",t.calculations.totalSavings5Years.toLocaleString()]})]})]})]})]})})]})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>O(s.id),children:e.jsx(ue,{className:"h-4 w-4"})})]})})]},s.id))})]})}),S>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",c," of ",S]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>x(c-1,g),disabled:c===1,children:"Previous"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>x(c+1,g),disabled:c===S,children:"Next"})]})]})]})]})]})}function Ae(){return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(je,{})})})}export{Ae as default};
