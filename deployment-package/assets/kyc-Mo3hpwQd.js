import{c as z,r as h,j as e,y as ve,P as me,f as Ne,C as o,b as u,d as f,e as S,a as g,B as C,D as be}from"./index-tQSIi359.js";import{C as ye,T as ke,a as we,b as ie,c as te}from"./tabs-BrOrm1mH.js";import{I as k}from"./input-Bs4M08Dr.js";import{L as b}from"./label-D3gkGvFi.js";import{A as Y,a as M}from"./alert-DM8QbjKm.js";import{B as y}from"./badge-BeNv00gB.js";import{b as H,a as j,C as U,S as J,T as re,U as Ce}from"./users-BWKttZpu.js";import{U as Ae,T as G}from"./user-DPdEkFwh.js";import{F as Ie}from"./file-text-Bk4FzUnx.js";import{B as ne}from"./building-2-DPn2qQgp.js";import{L as Be}from"./lock-DZFHFtxj.js";import{C as R}from"./clock-Tgdec0Io.js";import{L as Pe}from"./loader-circle-DawMBcb1.js";import{Z as xe}from"./zap-CVKbLvuo.js";import{C as Se}from"./circle-alert-CgFRAECj.js";import{R as ce}from"./refresh-cw-DJcsv8G4.js";import{E as W}from"./eye-fa2bG588.js";import{W as Ve}from"./wallet-connection-Ct3G56Hz.js";import"./useConnect-P8iWzXUW.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var X="Progress",Q=100,[Fe,ls]=ve(X),[Le,_e]=Fe(X),he=h.forwardRef((r,i)=>{const{__scopeProgress:v,value:s=null,max:x,getValueLabel:n=Te,...P}=r;(x||x===0)&&!oe(x)&&console.error(Ye(`${x}`,"Progress"));const p=oe(x)?x:Q;s!==null&&!de(s,p)&&console.error(Me(`${s}`,"Progress"));const N=de(s,p)?s:null,L=$(N)?n(N,p):void 0;return e.jsx(Le,{scope:v,value:N,max:p,children:e.jsx(me.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":$(N)?N:void 0,"aria-valuetext":L,role:"progressbar","data-state":pe(N,p),"data-value":N??void 0,"data-max":p,...P,ref:i})})});he.displayName=X;var ue="ProgressIndicator",fe=h.forwardRef((r,i)=>{const{__scopeProgress:v,...s}=r,x=_e(ue,v);return e.jsx(me.div,{"data-state":pe(x.value,x.max),"data-value":x.value??void 0,"data-max":x.max,...s,ref:i})});fe.displayName=ue;function Te(r,i){return`${Math.round(r/i*100)}%`}function pe(r,i){return r==null?"indeterminate":r===i?"complete":"loading"}function $(r){return typeof r=="number"}function oe(r){return $(r)&&!isNaN(r)&&r>0}function de(r,i){return $(r)&&!isNaN(r)&&r<=i&&r>=0}function Ye(r,i){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${i}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Q}\`.`}function Me(r,i){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${i}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Q} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ge=he,Ee=fe;const O=h.forwardRef(({className:r,value:i,...v},s)=>e.jsx(ge,{ref:s,className:Ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...v,children:e.jsx(Ee,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}));O.displayName=ge.displayName;const Ue={personalInfo:{fullName:"",email:"",phoneNumber:"",dateOfBirth:"",address:""},documents:{panNumber:"",aadhaarNumber:"",documentType:"pan",uploadedFiles:[]},banking:{bankAccount:"",ifscCode:"",bankName:"",upiId:"",paymentMethod:"bank"},verification:{digilockerConsent:!1,faceLivenessConsent:!1,termsAccepted:!1}};function Re(){const{address:r}=H(),[i,v]=h.useState(0),[s,x]=h.useState(Ue),[n,P]=h.useState({}),[p,N]=h.useState(!1),[L,_]=h.useState("not_started"),[T,V]=h.useState("premium"),[I,A]=h.useState([{id:"personal_info",title:"Personal Information",description:"Basic identity details",icon:Ae,status:"pending",isRequired:!0,estimatedTime:"2 minutes"},{id:"document_verification",title:"Document Verification",description:"PAN & Aadhaar verification",icon:Ie,status:"pending",isRequired:!0,estimatedTime:"3 minutes"},{id:"digilocker_verification",title:"Digilocker Verification",description:"Government document authentication",icon:j,status:"pending",isRequired:!0,estimatedTime:"5 minutes"},{id:"face_liveness",title:"Face Liveness Check",description:"Live selfie verification",icon:Z,status:"pending",isRequired:!0,estimatedTime:"2 minutes"},{id:"banking_verification",title:"Banking Details",description:"Bank account & UPI verification",icon:ne,status:"pending",isRequired:!0,estimatedTime:"3 minutes"}]),B=["Personal Information","Document Upload","Banking Details","Identity Verification","Final Review"],D=a=>{switch(a){case"basic":return{title:"Basic Verification",description:"Essential verification for basic features",color:"bg-blue-100 text-blue-800",features:["PAN Verification","Basic Bank Details","Email Verification"],limits:"₹25,000/month withdrawal limit"};case"enhanced":return{title:"Enhanced Verification",description:"Advanced verification for higher limits",color:"bg-orange-100 text-orange-800",features:["Advanced PAN Check","Bank Account Verification","Phone Verification"],limits:"₹1,00,000/month withdrawal limit"};case"premium":return{title:"Premium Verification",description:"Complete verification for unlimited access",color:"bg-green-100 text-green-800",features:["Digilocker Integration","Face Liveness","Comprehensive Checks"],limits:"Unlimited withdrawals"}}},F=a=>{const t={};switch(a){case 0:s.personalInfo.fullName.trim()||(t.fullName="Full name is required"),s.personalInfo.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.personalInfo.email)||(t.email="Invalid email format"):t.email="Email is required",s.personalInfo.phoneNumber.trim()?/^[6-9]\d{9}$/.test(s.personalInfo.phoneNumber)||(t.phoneNumber="Invalid phone number format"):t.phoneNumber="Phone number is required";break;case 1:s.documents.panNumber.trim()?/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(s.documents.panNumber)||(t.panNumber="Invalid PAN format (ABCDE1234F)"):t.panNumber="PAN number is required";break;case 2:(s.banking.paymentMethod==="bank"||s.banking.paymentMethod==="both")&&(s.banking.bankAccount.trim()||(t.bankAccount="Bank account number is required"),s.banking.ifscCode.trim()?/^[A-Z]{4}0[A-Z0-9]{6}$/.test(s.banking.ifscCode)||(t.ifscCode="Invalid IFSC code format"):t.ifscCode="IFSC code is required"),(s.banking.paymentMethod==="upi"||s.banking.paymentMethod==="both")&&(s.banking.upiId.trim()?/^[\w.-]+@[\w.-]+$/.test(s.banking.upiId)||(t.upiId="Invalid UPI ID format"):t.upiId="UPI ID is required");break;case 3:s.verification.digilockerConsent||(t.digilockerConsent="Digilocker consent is required"),s.verification.faceLivenessConsent||(t.faceLivenessConsent="Face liveness consent is required");break;case 4:s.verification.termsAccepted||(t.termsAccepted="Terms and conditions must be accepted");break}return P(t),Object.keys(t).length===0},m=(a,t,l)=>{x(c=>({...c,[a]:{...c[a],[t]:l}})),n[t]&&P(c=>{const ae={...c};return delete ae[t],ae})},d=()=>{F(i)&&v(a=>Math.min(a+1,B.length-1))},w=()=>{v(a=>Math.max(a-1,0))},K=async()=>{try{A(l=>l.map(c=>c.id==="digilocker_verification"?{...c,status:"in_progress"}:c));const t=await(await fetch("/api/kyc/digilocker/aadhaar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:r})})).json();if(t.success)window.open(t.consentUrl,"_blank"),A(l=>l.map(c=>c.id==="digilocker_verification"?{...c,status:"completed",confidence:95}:c));else throw new Error(t.error)}catch{A(t=>t.map(l=>l.id==="digilocker_verification"?{...l,status:"failed"}:l))}},ee=async()=>{try{A(l=>l.map(c=>c.id==="face_liveness"?{...c,status:"in_progress"}:c));const t=await(await fetch("/api/kyc/face/liveness",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:r,verificationId:"temp_id"})})).json();if(t.success)window.open(t.liveness_url,"_blank"),A(l=>l.map(c=>c.id==="face_liveness"?{...c,status:"completed",confidence:98}:c));else throw new Error(t.error)}catch{A(t=>t.map(l=>l.id==="face_liveness"?{...l,status:"failed"}:l))}},q=async()=>{if(F(4)){N(!0);try{const t=await(await fetch("/api/kyc/comprehensive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:r,fullName:s.personalInfo.fullName,email:s.personalInfo.email,phone:s.personalInfo.phoneNumber,panNumber:s.documents.panNumber,bankAccount:s.banking.bankAccount||void 0,ifscCode:s.banking.ifscCode||void 0,upiId:s.banking.upiId||void 0,verificationLevel:T})})).json();t.success&&t.status==="verified"?(_("verified"),A(l=>l.map(c=>({...c,status:"completed"})))):_("rejected")}catch{_("rejected")}finally{N(!1)}}},se=I.filter(a=>a.status==="completed").length,je=se/I.length*100,E=D(T);return r?L==="verified"?e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(o,{className:"border-2 border-green-200 bg-green-50",children:e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(U,{className:"h-12 w-12 text-green-600"})}),e.jsx(f,{className:"text-3xl text-green-800",children:"KYC Verification Complete!"}),e.jsx(S,{className:"text-lg text-green-700",children:"Your account has been successfully verified. You can now access all StablePay features."}),e.jsxs(y,{className:"mx-auto mt-4 bg-green-600",children:[E.title," - ",E.limits]})]})})}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsx(o,{className:"border-2 border-[#6667AB]/20 bg-gradient-to-r from-[#6667AB]/5 to-[#8B5CF6]/5",children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl text-gray-900",children:"StablePay KYC Verification"}),e.jsx(S,{className:"text-lg",children:"Complete your identity verification to unlock unlimited crypto-to-INR transfers"})]})]}),e.jsx(y,{className:E.color,children:E.title})]})})}),e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-[#6667AB]"}),"Choose Your Verification Level"]})}),e.jsx(g,{children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:["basic","enhanced","premium"].map(a=>{const t=D(a);return e.jsxs(o,{className:`cursor-pointer transition-all ${T===a?"border-[#6667AB] bg-[#6667AB]/5":"border-gray-200 hover:border-[#6667AB]/50"}`,onClick:()=>V(a),children:[e.jsxs(u,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{className:"text-lg",children:t.title}),a==="premium"&&e.jsx(y,{className:"bg-[#6667AB]",children:"Recommended"})]}),e.jsx(S,{children:t.description})]}),e.jsxs(g,{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-[#6667AB]",children:t.limits}),e.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:t.features.map((l,c)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-3 w-3 text-green-500"}),l]},c))})]})]},a)})})})]}),e.jsx(o,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Verification Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[se," of ",I.length," completed"]})]}),e.jsx(O,{value:je,className:"h-3"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:I.map(a=>{const t=a.icon;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.status==="completed"?"bg-green-100 text-green-600":a.status==="in_progress"?"bg-blue-100 text-blue-600":a.status==="failed"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(t,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:a.title}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),a.estimatedTime]}),a.confidence&&e.jsxs("div",{className:"text-xs text-green-600",children:[a.confidence,"% confidence"]})]})]},a.id)})})]})})}),e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-xl",children:B[i]}),e.jsxs(S,{children:["Step ",i+1," of ",B.length]})]}),e.jsxs(y,{variant:"outline",children:[Math.round((i+1)/B.length*100),"% Complete"]})]})}),e.jsxs(g,{className:"space-y-6",children:[i===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(k,{id:"fullName",value:s.personalInfo.fullName,onChange:a=>m("personalInfo","fullName",a.target.value),className:n.fullName?"border-red-300":"",placeholder:"Enter your full legal name"}),n.fullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.fullName})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:"Email Address *"}),e.jsx(k,{id:"email",type:"email",value:s.personalInfo.email,onChange:a=>m("personalInfo","email",a.target.value),className:n.email?"border-red-300":"",placeholder:"your.email@example.com"}),n.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.email})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(k,{id:"phoneNumber",value:s.personalInfo.phoneNumber,onChange:a=>m("personalInfo","phoneNumber",a.target.value),className:n.phoneNumber?"border-red-300":"",placeholder:"9876543210"}),n.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.phoneNumber})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(k,{id:"dateOfBirth",type:"date",value:s.personalInfo.dateOfBirth,onChange:a=>m("personalInfo","dateOfBirth",a.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"address",children:"Address"}),e.jsx(k,{id:"address",value:s.personalInfo.address,onChange:a=>m("personalInfo","address",a.target.value),placeholder:"Enter your complete address"})]})]}),i===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"panNumber",children:"PAN Number *"}),e.jsx(k,{id:"panNumber",value:s.documents.panNumber,onChange:a=>m("documents","panNumber",a.target.value.toUpperCase()),className:n.panNumber?"border-red-300":"",placeholder:"ABCDE1234F"}),n.panNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.panNumber})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"aadhaarNumber",children:"Aadhaar Number"}),e.jsx(k,{id:"aadhaarNumber",value:s.documents.aadhaarNumber,onChange:a=>m("documents","aadhaarNumber",a.target.value),placeholder:"1234 5678 9012"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Upload Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload clear images of your PAN card and Aadhaar card"}),e.jsxs(C,{variant:"outline",className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Choose Files"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported: JPG, PNG, PDF (Max 5MB each)"})]})]}),i===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Preferred Payment Method *"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[{value:"bank",label:"Bank Account",icon:ne},{value:"upi",label:"UPI Only",icon:De},{value:"both",label:"Both Methods",icon:ye}].map(({value:a,label:t,icon:l})=>e.jsx(o,{className:`cursor-pointer transition-all ${s.banking.paymentMethod===a?"border-[#6667AB] bg-[#6667AB]/5":"border-gray-200 hover:border-[#6667AB]/50"}`,onClick:()=>m("banking","paymentMethod",a),children:e.jsxs(g,{className:"p-4 text-center",children:[e.jsx(l,{className:"h-6 w-6 mx-auto mb-2 text-[#6667AB]"}),e.jsx("div",{className:"text-sm font-medium",children:t})]})},a))})]}),(s.banking.paymentMethod==="bank"||s.banking.paymentMethod==="both")&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium",children:"Bank Account Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"bankAccount",children:"Account Number *"}),e.jsx(k,{id:"bankAccount",value:s.banking.bankAccount,onChange:a=>m("banking","bankAccount",a.target.value),className:n.bankAccount?"border-red-300":"",placeholder:"123456789012"}),n.bankAccount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.bankAccount})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"ifscCode",children:"IFSC Code *"}),e.jsx(k,{id:"ifscCode",value:s.banking.ifscCode,onChange:a=>m("banking","ifscCode",a.target.value.toUpperCase()),className:n.ifscCode?"border-red-300":"",placeholder:"SBIN0001234"}),n.ifscCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.ifscCode})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"bankName",children:"Bank Name"}),e.jsx(k,{id:"bankName",value:s.banking.bankName,onChange:a=>m("banking","bankName",a.target.value),placeholder:"State Bank of India"})]})]}),(s.banking.paymentMethod==="upi"||s.banking.paymentMethod==="both")&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium",children:"UPI Details"}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"upiId",children:"UPI ID *"}),e.jsx(k,{id:"upiId",value:s.banking.upiId,onChange:a=>m("banking","upiId",a.target.value),className:n.upiId?"border-red-300":"",placeholder:"username@paytm"}),n.upiId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.upiId})]})]})]}),i===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Y,{children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx(M,{children:"The following verifications will be performed to ensure the highest level of security."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"h-8 w-8 text-[#6667AB]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Digilocker Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure document verification via Government of India"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"digilockerConsent",checked:s.verification.digilockerConsent,onChange:a=>m("verification","digilockerConsent",a.target.checked),className:"rounded border-gray-300"}),e.jsxs(C,{onClick:K,disabled:!s.verification.digilockerConsent,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Start Verification"]})]})]}),n.digilockerConsent&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.digilockerConsent})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-8 w-8 text-[#6667AB]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Face Liveness Detection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Live selfie verification for enhanced security"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"faceLivenessConsent",checked:s.verification.faceLivenessConsent,onChange:a=>m("verification","faceLivenessConsent",a.target.checked),className:"rounded border-gray-300"}),e.jsxs(C,{onClick:ee,disabled:!s.verification.faceLivenessConsent,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Start Liveness Check"]})]})]}),n.faceLivenessConsent&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.faceLivenessConsent})]})]})]}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Y,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(M,{children:"Please review your information before submitting for verification."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Personal Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",s.personalInfo.fullName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",s.personalInfo.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",s.personalInfo.phoneNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PAN:"})," ",s.documents.panNumber]})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Banking Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.banking.bankAccount&&e.jsxs("div",{children:[e.jsx("strong",{children:"Bank Account:"})," ***",s.banking.bankAccount.slice(-4)]}),s.banking.ifscCode&&e.jsxs("div",{children:[e.jsx("strong",{children:"IFSC:"})," ",s.banking.ifscCode]}),s.banking.upiId&&e.jsxs("div",{children:[e.jsx("strong",{children:"UPI ID:"})," ",s.banking.upiId]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"termsAccepted",checked:s.verification.termsAccepted,onChange:a=>m("verification","termsAccepted",a.target.checked),className:"rounded border-gray-300"}),e.jsxs("label",{htmlFor:"termsAccepted",className:"text-sm",children:["I agree to the ",e.jsx("a",{href:"#",className:"text-[#6667AB] underline",children:"Terms and Conditions"})," and ",e.jsx("a",{href:"#",className:"text-[#6667AB] underline",children:"Privacy Policy"})]})]}),n.termsAccepted&&e.jsx("p",{className:"text-red-500 text-sm",children:n.termsAccepted})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx(C,{variant:"outline",onClick:w,disabled:i===0,children:"Previous"}),i<B.length-1?e.jsx(C,{onClick:d,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:"Next"}):e.jsx(C,{onClick:q,disabled:p,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Submit for Verification"]})})]})]})]}),Object.keys(n).length>0&&e.jsxs(Y,{variant:"destructive",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsxs(M,{children:["Please fix the following errors:",e.jsx("ul",{className:"list-disc list-inside mt-2",children:Object.values(n).map((a,t)=>e.jsx("li",{children:a},t))})]})]})]}):e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(o,{className:"border-2 border-[#6667AB]/20",children:e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{className:"h-8 w-8 text-white"})}),e.jsx(f,{className:"text-2xl text-gray-900",children:"Connect Your Wallet"}),e.jsx(S,{className:"text-lg",children:"Please connect your wallet to begin the KYC verification process"})]})})})}function $e(){const{address:r}=H(),[i,v]=h.useState(null),[s,x]=h.useState(!0),[n,P]=h.useState(!1);h.useEffect(()=>{r&&p()},[r]);const p=async()=>{try{const d=await fetch(`/api/kyc/status/${r}`);if(d.ok){const w=await d.json();v(w)}}catch(d){console.error("Failed to fetch KYC status:",d)}finally{x(!1),P(!1)}},N=async()=>{P(!0),await p()},L=()=>{const d=document.createElement("a");d.href=`/api/kyc/certificate/${r}`,d.download=`kyc-certificate-${r}.pdf`,d.click()},_=d=>{switch(d){case"not_started":return{color:"bg-gray-100 text-gray-800",icon:R,title:"Not Started",description:"KYC verification has not been initiated"};case"in_progress":return{color:"bg-blue-100 text-blue-800",icon:R,title:"In Progress",description:"Your KYC verification is being processed"};case"verified":return{color:"bg-green-100 text-green-800",icon:U,title:"Verified",description:"Your account is fully verified"};case"rejected":return{color:"bg-red-100 text-red-800",icon:G,title:"Rejected",description:"Verification failed - please retry"};case"expired":return{color:"bg-orange-100 text-orange-800",icon:G,title:"Expired",description:"Verification has expired - renewal required"}}},T=d=>{switch(d){case"basic":return{color:"bg-blue-100 text-blue-800",title:"Basic",limits:"₹25,000/month"};case"enhanced":return{color:"bg-orange-100 text-orange-800",title:"Enhanced",limits:"₹1,00,000/month"};case"premium":return{color:"bg-purple-100 text-purple-800",title:"Premium",limits:"Unlimited"}}};if(s)return e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(o,{children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})})});if(!i)return e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsxs(o,{className:"border-2 border-[#6667AB]/20",children:[e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"h-8 w-8 text-white"})}),e.jsx(f,{className:"text-2xl",children:"Start Your KYC Journey"}),e.jsx(S,{className:"text-lg",children:"Complete your verification to unlock the full potential of StablePay"})]}),e.jsx(g,{className:"text-center",children:e.jsxs(C,{className:"bg-[#6667AB] hover:bg-[#5555AB]",size:"lg",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"Begin KYC Verification"]})})]})});const V=_(i.status),I=T(i.level),A=V.icon,B=Object.values(i.steps),D=B.filter(d=>d==="completed").length,F=B.length,m=D/F*100;return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsx(o,{className:"border-2 border-[#6667AB]/20 bg-gradient-to-r from-[#6667AB]/5 to-[#8B5CF6]/5",children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center",children:e.jsx(A,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl text-gray-900",children:"KYC Verification Status"}),e.jsx(S,{className:"text-lg",children:"Monitor your verification progress and manage your account limits"})]})]}),e.jsx(C,{variant:"outline",onClick:N,disabled:n,className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:n?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):e.jsx(ce,{className:"h-4 w-4"})})]})})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Status"]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{className:V.color,children:V.title}),e.jsx("p",{className:"text-sm text-gray-600",children:V.description}),i.confidenceScore>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Confidence Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{value:i.confidenceScore,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[i.confidenceScore,"%"]})]})]})]})})]}),e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Level"]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{className:I.color,children:I.title}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Withdrawal Limit"}),e.jsx("div",{className:"text-lg font-bold text-[#6667AB]",children:I.limits})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upgrade to Premium for unlimited withdrawals"})]})})]}),e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-[#6667AB]"}),"Progress"]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#6667AB]",children:[D,"/",F]}),e.jsx(O,{value:m,className:"h-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[D," of ",F," steps completed"]})]})})]})]}),e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Steps"]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(i.steps).map(([d,w])=>{const K={personal_info:"Personal Information",document_verification:"Document Verification",digilocker_verification:"Digilocker Verification",face_liveness:"Face Liveness Check",banking_verification:"Banking Verification"},q={personal_info:Ce,document_verification:j,digilocker_verification:j,face_liveness:W,banking_verification:re}[d];return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${w==="completed"?"bg-green-100 text-green-600":w==="pending"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K[d]}),e.jsx("div",{className:"text-sm text-gray-600 capitalize",children:w})]})]}),e.jsx(y,{variant:w==="completed"?"default":w==="pending"?"secondary":"destructive",children:w})]},d)})})})]}),i.verificationDetails&&e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Details"]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"PAN Verified"}),e.jsx(y,{variant:i.verificationDetails.panVerified?"default":"secondary",children:i.verificationDetails.panVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Aadhaar Verified"}),e.jsx(y,{variant:i.verificationDetails.aadhaarVerified?"default":"secondary",children:i.verificationDetails.aadhaarVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Bank Verified"}),e.jsx(y,{variant:i.verificationDetails.bankVerified?"default":"secondary",children:i.verificationDetails.bankVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Face Verified"}),e.jsx(y,{variant:i.verificationDetails.faceVerified?"default":"secondary",children:i.verificationDetails.faceVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Name Match Score"}),e.jsxs(y,{variant:"outline",children:[i.verificationDetails.nameMatchScore,"%"]})]})]})})]}),i.status==="verified"&&e.jsxs(o,{children:[e.jsx(u,{children:e.jsx(f,{children:"Account Actions"})}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(C,{onClick:L,variant:"outline",className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Download Certificate"]}),i.level!=="premium"&&e.jsxs(C,{className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Upgrade to Premium"]})]})})]}),i.status==="rejected"&&e.jsxs(Y,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(M,{children:"Your KYC verification was rejected. Please review your information and try again. If you believe this is an error, please contact our support team."})]}),i.status==="expired"&&e.jsxs(Y,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(M,{children:"Your KYC verification has expired. Please complete the verification process again to continue using all features."})]})]})}function os(){const{address:r}=H(),[i,v]=h.useState("verify");return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(j,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"StablePay KYC Center"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Complete your identity verification to unlock seamless crypto-to-INR transfers"})]}),e.jsxs(ke,{value:i,onValueChange:v,className:"w-full",children:[e.jsxs(we,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-8",children:[e.jsxs(ie,{value:"verify",className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Verify Identity"]}),e.jsxs(ie,{value:"status",className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"View Status"]})]}),e.jsx(te,{value:"verify",className:"space-y-6",children:e.jsx(Re,{})}),e.jsx(te,{value:"status",className:"space-y-6",children:e.jsx($e,{})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(j,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"StablePay KYC Center"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Complete your identity verification to unlock seamless crypto-to-INR transfers"})]}),e.jsx(Ve,{})]})})}export{os as default};
