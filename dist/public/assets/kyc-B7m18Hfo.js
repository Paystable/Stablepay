import{c as re,r as g,j as e,C as l,b as m,d as x,e as w,a as h,B as v,D as le}from"./index-CrMWBvJr.js";import{C as de,A as L,a as T,T as oe,b as me,c as X,d as ee}from"./alert-brI6BLY4.js";import{d as W,a as u,C as U,S as Z,L as p,I as N}from"./label-BQEq8q9X.js";import{B as j,T as se,U as xe}from"./badge-Dd1rA5Q5.js";import{F as he,P as J,T as q,W as ue}from"./wallet-connection-DchJWRXF.js";import{U as fe}from"./user-BGPND5Xj.js";import{C as $}from"./camera-DLZohmvS.js";import{B as ie}from"./building-2-HawBRcSE.js";import{L as pe}from"./lock-BegV7CTt.js";import{C as E}from"./clock-n7B8W1GF.js";import{L as je}from"./loader-circle-BmjUgLMc.js";import{Z as ne}from"./zap-DXG0Z27b.js";import{C as ge}from"./circle-alert-B0sMazh7.js";import{R as ae}from"./refresh-cw-TBE5l55V.js";import{E as G}from"./eye-Dl45HHUs.js";import"./select-BoB5Iub_.js";import"./wallet-C4y3FRFj.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),be={personalInfo:{fullName:"",email:"",phoneNumber:"",dateOfBirth:"",address:""},documents:{panNumber:"",aadhaarNumber:"",documentType:"pan",uploadedFiles:[]},banking:{bankAccount:"",ifscCode:"",bankName:"",upiId:"",paymentMethod:"bank"},verification:{digilockerConsent:!1,faceLivenessConsent:!1,termsAccepted:!1}};function ve(){const{address:f}=W(),[t,A]=g.useState(0),[i,M]=g.useState(be),[r,P]=g.useState({}),[V,Y]=g.useState(!1),[K,F]=g.useState("not_started"),[D,B]=g.useState("premium"),[k,y]=g.useState([{id:"personal_info",title:"Personal Information",description:"Basic identity details",icon:fe,status:"pending",isRequired:!0,estimatedTime:"2 minutes"},{id:"document_verification",title:"Document Verification",description:"PAN & Aadhaar verification",icon:he,status:"pending",isRequired:!0,estimatedTime:"3 minutes"},{id:"digilocker_verification",title:"Digilocker Verification",description:"Government document authentication",icon:u,status:"pending",isRequired:!0,estimatedTime:"5 minutes"},{id:"face_liveness",title:"Face Liveness Check",description:"Live selfie verification",icon:$,status:"pending",isRequired:!0,estimatedTime:"2 minutes"},{id:"banking_verification",title:"Banking Details",description:"Bank account & UPI verification",icon:ie,status:"pending",isRequired:!0,estimatedTime:"3 minutes"}]),C=["Personal Information","Document Upload","Banking Details","Identity Verification","Final Review"],I=s=>{switch(s){case"basic":return{title:"Basic Verification",description:"Essential verification for basic features",color:"bg-blue-100 text-blue-800",features:["PAN Verification","Basic Bank Details","Email Verification"],limits:"₹25,000/month withdrawal limit"};case"enhanced":return{title:"Enhanced Verification",description:"Advanced verification for higher limits",color:"bg-orange-100 text-orange-800",features:["Advanced PAN Check","Bank Account Verification","Phone Verification"],limits:"₹1,00,000/month withdrawal limit"};case"premium":return{title:"Premium Verification",description:"Complete verification for unlimited access",color:"bg-green-100 text-green-800",features:["Digilocker Integration","Face Liveness","Comprehensive Checks"],limits:"Unlimited withdrawals"}}},S=s=>{const a={};switch(s){case 0:i.personalInfo.fullName.trim()||(a.fullName="Full name is required"),i.personalInfo.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.personalInfo.email)||(a.email="Invalid email format"):a.email="Email is required",i.personalInfo.phoneNumber.trim()?/^[6-9]\d{9}$/.test(i.personalInfo.phoneNumber)||(a.phoneNumber="Invalid phone number format"):a.phoneNumber="Phone number is required";break;case 1:i.documents.panNumber.trim()?/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(i.documents.panNumber)||(a.panNumber="Invalid PAN format (ABCDE1234F)"):a.panNumber="PAN number is required";break;case 2:(i.banking.paymentMethod==="bank"||i.banking.paymentMethod==="both")&&(i.banking.bankAccount.trim()||(a.bankAccount="Bank account number is required"),i.banking.ifscCode.trim()?/^[A-Z]{4}0[A-Z0-9]{6}$/.test(i.banking.ifscCode)||(a.ifscCode="Invalid IFSC code format"):a.ifscCode="IFSC code is required"),(i.banking.paymentMethod==="upi"||i.banking.paymentMethod==="both")&&(i.banking.upiId.trim()?/^[\w.-]+@[\w.-]+$/.test(i.banking.upiId)||(a.upiId="Invalid UPI ID format"):a.upiId="UPI ID is required");break;case 3:i.verification.digilockerConsent||(a.digilockerConsent="Digilocker consent is required"),i.verification.faceLivenessConsent||(a.faceLivenessConsent="Face liveness consent is required");break;case 4:i.verification.termsAccepted||(a.termsAccepted="Terms and conditions must be accepted");break}return P(a),Object.keys(a).length===0},o=(s,a,c)=>{M(n=>({...n,[s]:{...n[s],[a]:c}})),r[a]&&P(n=>{const Q={...n};return delete Q[a],Q})},d=()=>{S(t)&&A(s=>Math.min(s+1,C.length-1))},b=()=>{A(s=>Math.max(s-1,0))},O=async()=>{try{y(c=>c.map(n=>n.id==="digilocker_verification"?{...n,status:"in_progress"}:n));const a=await(await fetch("/api/kyc/digilocker/aadhaar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:f})})).json();if(a.success)window.open(a.consentUrl,"_blank"),y(c=>c.map(n=>n.id==="digilocker_verification"?{...n,status:"completed",confidence:95}:n));else throw new Error(a.error)}catch{y(a=>a.map(c=>c.id==="digilocker_verification"?{...c,status:"failed"}:c))}},z=async()=>{try{y(c=>c.map(n=>n.id==="face_liveness"?{...n,status:"in_progress"}:n));const a=await(await fetch("/api/kyc/face/liveness",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:f,verificationId:"temp_id"})})).json();if(a.success)window.open(a.liveness_url,"_blank"),y(c=>c.map(n=>n.id==="face_liveness"?{...n,status:"completed",confidence:98}:n));else throw new Error(a.error)}catch{y(a=>a.map(c=>c.id==="face_liveness"?{...c,status:"failed"}:c))}},R=async()=>{if(S(4)){Y(!0);try{const a=await(await fetch("/api/kyc/comprehensive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userAddress:f,fullName:i.personalInfo.fullName,email:i.personalInfo.email,phone:i.personalInfo.phoneNumber,panNumber:i.documents.panNumber,bankAccount:i.banking.bankAccount||void 0,ifscCode:i.banking.ifscCode||void 0,upiId:i.banking.upiId||void 0,verificationLevel:D})})).json();a.success&&a.status==="verified"?(F("verified"),y(c=>c.map(n=>({...n,status:"completed"})))):F("rejected")}catch{F("rejected")}finally{Y(!1)}}},H=k.filter(s=>s.status==="completed").length,ce=H/k.length*100,_=I(D);return f?K==="verified"?e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(l,{className:"border-2 border-green-200 bg-green-50",children:e.jsxs(m,{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(U,{className:"h-12 w-12 text-green-600"})}),e.jsx(x,{className:"text-3xl text-green-800",children:"KYC Verification Complete!"}),e.jsx(w,{className:"text-lg text-green-700",children:"Your account has been successfully verified. You can now access all StablePay features."}),e.jsxs(j,{className:"mx-auto mt-4 bg-green-600",children:[_.title," - ",_.limits]})]})})}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsx(l,{className:"border-2 border-[#6667AB]/20 bg-gradient-to-r from-[#6667AB]/5 to-[#8B5CF6]/5",children:e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center",children:e.jsx(u,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(x,{className:"text-2xl text-gray-900",children:"StablePay KYC Verification"}),e.jsx(w,{className:"text-lg",children:"Complete your identity verification to unlock unlimited crypto-to-INR transfers"})]})]}),e.jsx(j,{className:_.color,children:_.title})]})})}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-[#6667AB]"}),"Choose Your Verification Level"]})}),e.jsx(h,{children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:["basic","enhanced","premium"].map(s=>{const a=I(s);return e.jsxs(l,{className:`cursor-pointer transition-all ${D===s?"border-[#6667AB] bg-[#6667AB]/5":"border-gray-200 hover:border-[#6667AB]/50"}`,onClick:()=>B(s),children:[e.jsxs(m,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-lg",children:a.title}),s==="premium"&&e.jsx(j,{className:"bg-[#6667AB]",children:"Recommended"})]}),e.jsx(w,{children:a.description})]}),e.jsxs(h,{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-[#6667AB]",children:a.limits}),e.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:a.features.map((c,n)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-3 w-3 text-green-500"}),c]},n))})]})]},s)})})})]}),e.jsx(l,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Verification Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[H," of ",k.length," completed"]})]}),e.jsx(J,{value:ce,className:"h-3"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:k.map(s=>{const a=s.icon;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.status==="completed"?"bg-green-100 text-green-600":s.status==="in_progress"?"bg-blue-100 text-blue-600":s.status==="failed"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(a,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:s.title}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),s.estimatedTime]}),s.confidence&&e.jsxs("div",{className:"text-xs text-green-600",children:[s.confidence,"% confidence"]})]})]},s.id)})})]})})}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-xl",children:C[t]}),e.jsxs(w,{children:["Step ",t+1," of ",C.length]})]}),e.jsxs(j,{variant:"outline",children:[Math.round((t+1)/C.length*100),"% Complete"]})]})}),e.jsxs(h,{className:"space-y-6",children:[t===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(N,{id:"fullName",value:i.personalInfo.fullName,onChange:s=>o("personalInfo","fullName",s.target.value),className:r.fullName?"border-red-300":"",placeholder:"Enter your full legal name"}),r.fullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.fullName})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",children:"Email Address *"}),e.jsx(N,{id:"email",type:"email",value:i.personalInfo.email,onChange:s=>o("personalInfo","email",s.target.value),className:r.email?"border-red-300":"",placeholder:"your.email@example.com"}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(N,{id:"phoneNumber",value:i.personalInfo.phoneNumber,onChange:s=>o("personalInfo","phoneNumber",s.target.value),className:r.phoneNumber?"border-red-300":"",placeholder:"9876543210"}),r.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phoneNumber})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(N,{id:"dateOfBirth",type:"date",value:i.personalInfo.dateOfBirth,onChange:s=>o("personalInfo","dateOfBirth",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"address",children:"Address"}),e.jsx(N,{id:"address",value:i.personalInfo.address,onChange:s=>o("personalInfo","address",s.target.value),placeholder:"Enter your complete address"})]})]}),t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"panNumber",children:"PAN Number *"}),e.jsx(N,{id:"panNumber",value:i.documents.panNumber,onChange:s=>o("documents","panNumber",s.target.value.toUpperCase()),className:r.panNumber?"border-red-300":"",placeholder:"ABCDE1234F"}),r.panNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.panNumber})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"aadhaarNumber",children:"Aadhaar Number"}),e.jsx(N,{id:"aadhaarNumber",value:i.documents.aadhaarNumber,onChange:s=>o("documents","aadhaarNumber",s.target.value),placeholder:"1234 5678 9012"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(te,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Upload Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload clear images of your PAN card and Aadhaar card"}),e.jsxs(v,{variant:"outline",className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Choose Files"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported: JPG, PNG, PDF (Max 5MB each)"})]})]}),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Preferred Payment Method *"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[{value:"bank",label:"Bank Account",icon:ie},{value:"upi",label:"UPI Only",icon:Ne},{value:"both",label:"Both Methods",icon:de}].map(({value:s,label:a,icon:c})=>e.jsx(l,{className:`cursor-pointer transition-all ${i.banking.paymentMethod===s?"border-[#6667AB] bg-[#6667AB]/5":"border-gray-200 hover:border-[#6667AB]/50"}`,onClick:()=>o("banking","paymentMethod",s),children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(c,{className:"h-6 w-6 mx-auto mb-2 text-[#6667AB]"}),e.jsx("div",{className:"text-sm font-medium",children:a})]})},s))})]}),(i.banking.paymentMethod==="bank"||i.banking.paymentMethod==="both")&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium",children:"Bank Account Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bankAccount",children:"Account Number *"}),e.jsx(N,{id:"bankAccount",value:i.banking.bankAccount,onChange:s=>o("banking","bankAccount",s.target.value),className:r.bankAccount?"border-red-300":"",placeholder:"123456789012"}),r.bankAccount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.bankAccount})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"ifscCode",children:"IFSC Code *"}),e.jsx(N,{id:"ifscCode",value:i.banking.ifscCode,onChange:s=>o("banking","ifscCode",s.target.value.toUpperCase()),className:r.ifscCode?"border-red-300":"",placeholder:"SBIN0001234"}),r.ifscCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.ifscCode})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bankName",children:"Bank Name"}),e.jsx(N,{id:"bankName",value:i.banking.bankName,onChange:s=>o("banking","bankName",s.target.value),placeholder:"State Bank of India"})]})]}),(i.banking.paymentMethod==="upi"||i.banking.paymentMethod==="both")&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-medium",children:"UPI Details"}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"upiId",children:"UPI ID *"}),e.jsx(N,{id:"upiId",value:i.banking.upiId,onChange:s=>o("banking","upiId",s.target.value),className:r.upiId?"border-red-300":"",placeholder:"username@paytm"}),r.upiId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.upiId})]})]})]}),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(T,{children:"The following verifications will be performed to ensure the highest level of security."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-8 w-8 text-[#6667AB]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Digilocker Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure document verification via Government of India"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"digilockerConsent",checked:i.verification.digilockerConsent,onChange:s=>o("verification","digilockerConsent",s.target.checked),className:"rounded border-gray-300"}),e.jsxs(v,{onClick:O,disabled:!i.verification.digilockerConsent,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Start Verification"]})]})]}),r.digilockerConsent&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.digilockerConsent})]}),e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"h-8 w-8 text-[#6667AB]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Face Liveness Detection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Live selfie verification for enhanced security"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"faceLivenessConsent",checked:i.verification.faceLivenessConsent,onChange:s=>o("verification","faceLivenessConsent",s.target.checked),className:"rounded border-gray-300"}),e.jsxs(v,{onClick:z,disabled:!i.verification.faceLivenessConsent,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Start Liveness Check"]})]})]}),r.faceLivenessConsent&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.faceLivenessConsent})]})]})]}),t===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(T,{children:"Please review your information before submitting for verification."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Personal Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",i.personalInfo.fullName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",i.personalInfo.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",i.personalInfo.phoneNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PAN:"})," ",i.documents.panNumber]})]})]}),e.jsxs(l,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Banking Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[i.banking.bankAccount&&e.jsxs("div",{children:[e.jsx("strong",{children:"Bank Account:"})," ***",i.banking.bankAccount.slice(-4)]}),i.banking.ifscCode&&e.jsxs("div",{children:[e.jsx("strong",{children:"IFSC:"})," ",i.banking.ifscCode]}),i.banking.upiId&&e.jsxs("div",{children:[e.jsx("strong",{children:"UPI ID:"})," ",i.banking.upiId]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"termsAccepted",checked:i.verification.termsAccepted,onChange:s=>o("verification","termsAccepted",s.target.checked),className:"rounded border-gray-300"}),e.jsxs("label",{htmlFor:"termsAccepted",className:"text-sm",children:["I agree to the ",e.jsx("a",{href:"#",className:"text-[#6667AB] underline",children:"Terms and Conditions"})," and ",e.jsx("a",{href:"#",className:"text-[#6667AB] underline",children:"Privacy Policy"})]})]}),r.termsAccepted&&e.jsx("p",{className:"text-red-500 text-sm",children:r.termsAccepted})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx(v,{variant:"outline",onClick:b,disabled:t===0,children:"Previous"}),t<C.length-1?e.jsx(v,{onClick:d,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:"Next"}):e.jsx(v,{onClick:R,disabled:V,className:"bg-[#6667AB] hover:bg-[#5555AB]",children:V?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Submit for Verification"]})})]})]})]}),Object.keys(r).length>0&&e.jsxs(L,{variant:"destructive",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsxs(T,{children:["Please fix the following errors:",e.jsx("ul",{className:"list-disc list-inside mt-2",children:Object.values(r).map((s,a)=>e.jsx("li",{children:s},a))})]})]})]}):e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(l,{className:"border-2 border-[#6667AB]/20",children:e.jsxs(m,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pe,{className:"h-8 w-8 text-white"})}),e.jsx(x,{className:"text-2xl text-gray-900",children:"Connect Your Wallet"}),e.jsx(w,{className:"text-lg",children:"Please connect your wallet to begin the KYC verification process"})]})})})}function ye(){const{address:f}=W(),[t,A]=g.useState(null),[i,M]=g.useState(!0),[r,P]=g.useState(!1);g.useEffect(()=>{f&&V()},[f]);const V=async()=>{try{const d=await fetch(`/api/kyc/status/${f}`);if(d.ok){const b=await d.json();A(b)}}catch(d){console.error("Failed to fetch KYC status:",d)}finally{M(!1),P(!1)}},Y=async()=>{P(!0),await V()},K=()=>{const d=document.createElement("a");d.href=`/api/kyc/certificate/${f}`,d.download=`kyc-certificate-${f}.pdf`,d.click()},F=d=>{switch(d){case"not_started":return{color:"bg-gray-100 text-gray-800",icon:E,title:"Not Started",description:"KYC verification has not been initiated"};case"in_progress":return{color:"bg-blue-100 text-blue-800",icon:E,title:"In Progress",description:"Your KYC verification is being processed"};case"verified":return{color:"bg-green-100 text-green-800",icon:U,title:"Verified",description:"Your account is fully verified"};case"rejected":return{color:"bg-red-100 text-red-800",icon:q,title:"Rejected",description:"Verification failed - please retry"};case"expired":return{color:"bg-orange-100 text-orange-800",icon:q,title:"Expired",description:"Verification has expired - renewal required"}}},D=d=>{switch(d){case"basic":return{color:"bg-blue-100 text-blue-800",title:"Basic",limits:"₹25,000/month"};case"enhanced":return{color:"bg-orange-100 text-orange-800",title:"Enhanced",limits:"₹1,00,000/month"};case"premium":return{color:"bg-purple-100 text-purple-800",title:"Premium",limits:"Unlimited"}}};if(i)return e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsx(l,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})})});if(!t)return e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:e.jsxs(l,{className:"border-2 border-[#6667AB]/20",children:[e.jsxs(m,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{className:"h-8 w-8 text-white"})}),e.jsx(x,{className:"text-2xl",children:"Start Your KYC Journey"}),e.jsx(w,{className:"text-lg",children:"Complete your verification to unlock the full potential of StablePay"})]}),e.jsx(h,{className:"text-center",children:e.jsxs(v,{className:"bg-[#6667AB] hover:bg-[#5555AB]",size:"lg",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),"Begin KYC Verification"]})})]})});const B=F(t.status),k=D(t.level),y=B.icon,C=Object.values(t.steps),I=C.filter(d=>d==="completed").length,S=C.length,o=I/S*100;return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsx(l,{className:"border-2 border-[#6667AB]/20 bg-gradient-to-r from-[#6667AB]/5 to-[#8B5CF6]/5",children:e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center",children:e.jsx(y,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(x,{className:"text-2xl text-gray-900",children:"KYC Verification Status"}),e.jsx(w,{className:"text-lg",children:"Monitor your verification progress and manage your account limits"})]})]}),e.jsx(v,{variant:"outline",onClick:Y,disabled:r,className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:r?e.jsx(ae,{className:"h-4 w-4 animate-spin"}):e.jsx(ae,{className:"h-4 w-4"})})]})})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(l,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(x,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Status"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:B.color,children:B.title}),e.jsx("p",{className:"text-sm text-gray-600",children:B.description}),t.confidenceScore>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Confidence Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{value:t.confidenceScore,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.confidenceScore,"%"]})]})]})]})})]}),e.jsxs(l,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(x,{className:"text-lg flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Level"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:k.color,children:k.title}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Withdrawal Limit"}),e.jsx("div",{className:"text-lg font-bold text-[#6667AB]",children:k.limits})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upgrade to Premium for unlimited withdrawals"})]})})]}),e.jsxs(l,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(x,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-[#6667AB]"}),"Progress"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#6667AB]",children:[I,"/",S]}),e.jsx(J,{value:o,className:"h-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I," of ",S," steps completed"]})]})})]})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Steps"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(t.steps).map(([d,b])=>{const O={personal_info:"Personal Information",document_verification:"Document Verification",digilocker_verification:"Digilocker Verification",face_liveness:"Face Liveness Check",banking_verification:"Banking Verification"},R={personal_info:xe,document_verification:u,digilocker_verification:u,face_liveness:G,banking_verification:se}[d];return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${b==="completed"?"bg-green-100 text-green-600":b==="pending"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:e.jsx(R,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:O[d]}),e.jsx("div",{className:"text-sm text-gray-600 capitalize",children:b})]})]}),e.jsx(j,{variant:b==="completed"?"default":b==="pending"?"secondary":"destructive",children:b})]},d)})})})]}),t.verificationDetails&&e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-[#6667AB]"}),"Verification Details"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"PAN Verified"}),e.jsx(j,{variant:t.verificationDetails.panVerified?"default":"secondary",children:t.verificationDetails.panVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Aadhaar Verified"}),e.jsx(j,{variant:t.verificationDetails.aadhaarVerified?"default":"secondary",children:t.verificationDetails.aadhaarVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Bank Verified"}),e.jsx(j,{variant:t.verificationDetails.bankVerified?"default":"secondary",children:t.verificationDetails.bankVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Face Verified"}),e.jsx(j,{variant:t.verificationDetails.faceVerified?"default":"secondary",children:t.verificationDetails.faceVerified?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Name Match Score"}),e.jsxs(j,{variant:"outline",children:[t.verificationDetails.nameMatchScore,"%"]})]})]})})]}),t.status==="verified"&&e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(x,{children:"Account Actions"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(v,{onClick:K,variant:"outline",className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB] hover:text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Download Certificate"]}),t.level!=="premium"&&e.jsxs(v,{className:"bg-[#6667AB] hover:bg-[#5555AB]",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Upgrade to Premium"]})]})})]}),t.status==="rejected"&&e.jsxs(L,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(T,{children:"Your KYC verification was rejected. Please review your information and try again. If you believe this is an error, please contact our support team."})]}),t.status==="expired"&&e.jsxs(L,{children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(T,{children:"Your KYC verification has expired. Please complete the verification process again to continue using all features."})]})]})}function Me(){const{address:f}=W(),[t,A]=g.useState("verify");return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"StablePay KYC Center"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Complete your identity verification to unlock seamless crypto-to-INR transfers"})]}),e.jsxs(oe,{value:t,onValueChange:A,className:"w-full",children:[e.jsxs(me,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-8",children:[e.jsxs(X,{value:"verify",className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Verify Identity"]}),e.jsxs(X,{value:"status",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"View Status"]})]}),e.jsx(ee,{value:"verify",className:"space-y-6",children:e.jsx(ve,{})}),e.jsx(ee,{value:"status",className:"space-y-6",children:e.jsx(ye,{})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#6667AB] to-[#8B5CF6] rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"StablePay KYC Center"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Complete your identity verification to unlock seamless crypto-to-INR transfers"})]}),e.jsx(ue,{})]})})}export{Me as default};
