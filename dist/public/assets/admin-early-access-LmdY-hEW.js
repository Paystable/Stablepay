import{c as B,r as i,j as e,C as l,a as c,B as o,D as S,b as k,d as C}from"./index-CrMWBvJr.js";import{U as F,T as D,B as R}from"./badge-Dd1rA5Q5.js";import{R as h}from"./refresh-cw-TBE5l55V.js";import{D as T}from"./dollar-sign-CJLLa6iZ.js";import{C as E}from"./calendar-JBJMVsQG.js";import{M as L}from"./mail-C8trcXgl.js";import{W as U}from"./wallet-C4y3FRFj.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function $(){const[j,v]=i.useState([]),[n,A]=i.useState(null),[g,N]=i.useState(!0),[p,f]=i.useState(null),x=async()=>{try{N(!0),f(null);const[s,a]=await Promise.all([fetch("/api/early-access/submissions"),fetch("/api/early-access/stats")]);if(!s.ok||!a.ok)throw new Error("Failed to fetch data");const d=await s.json(),r=await a.json();v(d.data.submissions),A(r.data)}catch(s){f(s instanceof Error?s.message:"Failed to fetch data")}finally{N(!1)}};i.useEffect(()=>{x()},[]);const m=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),w=()=>{const s=[["Name","Email","Phone","Form Type","Wallet Address","Monthly Remittance","Investment Amount","Combined Benefit","Submitted At"],...j.map(t=>{var b,u,y;return[t.fullName,t.email,t.phoneNumber,t.formType,t.walletAddress||"",(b=t.calculations)!=null&&b.monthlySavings?m(t.calculations.monthlySavings*12):"",(u=t.calculations)!=null&&u.annualYield?m(t.calculations.annualYield/(t.calculations.projectedYield||1)*100):"",(y=t.calculations)!=null&&y.combinedBenefit?m(t.calculations.combinedBenefit):"",new Date(t.submittedAt).toLocaleDateString()]})].map(t=>t.join(",")).join(`
`),a=new Blob([s],{type:"text/csv"}),d=window.URL.createObjectURL(a),r=document.createElement("a");r.href=d,r.download=`early-access-submissions-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(d)};return g?e.jsx("div",{className:"min-h-screen bg-[#FAF9F6] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-[#6667AB]"}),e.jsx("p",{className:"text-[#6667AB]",children:"Loading early access data..."})]})}):p?e.jsx("div",{className:"min-h-screen bg-[#FAF9F6] flex items-center justify-center",children:e.jsx(l,{className:"max-w-md",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:p}),e.jsxs(o,{onClick:x,className:"bg-[#6667AB] hover:bg-[#6667AB]/90",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):e.jsx("div",{className:"min-h-screen bg-[#FAF9F6] p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:"Early Access Dashboard"}),e.jsx("p",{className:"text-[#6667AB]",children:"Monitor and manage early access submissions"})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(l,{className:"brand-card",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(F,{className:"w-8 h-8 text-[#6667AB] mx-auto mb-3"}),e.jsx("div",{className:"text-3xl font-bold text-black",children:n.totalSubmissions}),e.jsx("div",{className:"text-sm text-[#6667AB]",children:"Total Submissions"})]})}),e.jsx(l,{className:"brand-card",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(D,{className:"w-8 h-8 text-[#6667AB] mx-auto mb-3"}),e.jsx("div",{className:"text-3xl font-bold text-black",children:n.formTypeBreakdown.savings}),e.jsx("div",{className:"text-sm text-[#6667AB]",children:"Savings Forms"})]})}),e.jsx(l,{className:"brand-card",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(T,{className:"w-8 h-8 text-[#6667AB] mx-auto mb-3"}),e.jsx("div",{className:"text-3xl font-bold text-black",children:n.formTypeBreakdown.investment}),e.jsx("div",{className:"text-sm text-[#6667AB]",children:"Investment Forms"})]})}),e.jsx(l,{className:"brand-card",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(E,{className:"w-8 h-8 text-[#6667AB] mx-auto mb-3"}),e.jsx("div",{className:"text-3xl font-bold text-black",children:n.recentSubmissions}),e.jsx("div",{className:"text-sm text-[#6667AB]",children:"Last 24 Hours"})]})})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs(o,{onClick:x,variant:"outline",className:"border-[#6667AB] text-[#6667AB] hover:bg-[#6667AB]/10",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(o,{onClick:w,className:"bg-[#6667AB] hover:bg-[#6667AB]/90",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),e.jsxs(l,{className:"brand-card",children:[e.jsx(k,{children:e.jsx(C,{className:"text-xl text-black",children:"Recent Submissions"})}),e.jsx(c,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#6667AB]/20",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Contact"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Form Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Wallet"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Benefits"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-black",children:"Submitted"})]})}),e.jsx("tbody",{children:j.map(s=>{var a;return e.jsxs("tr",{className:"border-b border-[#6667AB]/10",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"font-medium text-black",children:s.fullName})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-[#6667AB]",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),s.email]}),e.jsxs("div",{className:"flex items-center text-sm text-[#6667AB]",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),s.phoneNumber]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(R,{className:`${s.formType==="savings"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:s.formType})}),e.jsx("td",{className:"py-3 px-4",children:s.walletAddress?e.jsxs("div",{className:"flex items-center text-sm text-[#6667AB]",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),s.walletAddress.slice(0,6),"...",s.walletAddress.slice(-4)]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Not connected"})}),e.jsx("td",{className:"py-3 px-4",children:(a=s.calculations)!=null&&a.combinedBenefit?e.jsx("div",{className:"text-sm font-medium text-green-600",children:m(s.calculations.combinedBenefit)}):e.jsx("span",{className:"text-gray-400 text-sm",children:"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"text-sm text-[#6667AB]",children:new Date(s.submittedAt).toLocaleDateString()})})]},s.id)})})]})})})]})]})})}export{$ as default};
